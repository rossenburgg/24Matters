<!DOCTYPE html>
<html lang="en">
<%- include('partials/_head.ejs') %>
<body>
<%- include('partials/_header.ejs') %>
<main role="main" class="container mt-4">
    <h2>Game</h2>
    <ul class="nav nav-tabs" id="bettingTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="manual-tab" data-bs-toggle="tab" data-bs-target="#manual" type="button" role="tab" aria-controls="manual" aria-selected="true">Manual Betting</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="auto-tab" data-bs-toggle="tab" data-bs-target="#auto" type="button" role="tab" aria-controls="auto" aria-selected="false">Auto Betting</button>
        </li>
    </ul>
    <div class="tab-content" id="bettingTabContent">
        <div class="tab-pane fade show active" id="manual" role="tabpanel" aria-labelledby="manual-tab">
            <!-- Manual betting content goes here -->
            <!-- Include form for manual betting similar to the existing structure or as needed for the game logic -->
        </div>
        <div class="tab-pane fade" id="auto" role="tabpanel" aria-labelledby="auto-tab">
            <%- include('partials/autoBettingForm.ejs') %>
        </div>
    </div>
    <div id="gameHistory"></div>
</main>
<%- include('partials/_footer.ejs') %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/autoBet.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var manualTab = document.getElementById('manual-tab');
        var autoTab = document.getElementById('auto-tab');
        var manualPane = document.getElementById('manual');
        var autoPane = document.getElementById('auto');

        manualTab.addEventListener('click', function() {
            manualPane.classList.add('show', 'active');
            autoPane.classList.remove('show', 'active');
        });

        autoTab.addEventListener('click', function() {
            autoPane.classList.add('show', 'active');
            manualPane.classList.remove('show', 'active');
        });

        // Check URL for a parameter to programmatically activate the auto betting tab
        var urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('autoBet')) {
            $('#auto-tab').tab('show'); // Use jQuery to show the auto betting tab programmatically
        }
    }, false);
</script>
</body>
</html>